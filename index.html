<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Intellibat by imayoda</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Intellibat</h1>
      <h2 class="project-tagline"></h2>
      <a href="https://github.com/imayoda/intellibat" class="btn">View on GitHub</a>
      <a href="https://github.com/imayoda/intellibat/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/imayoda/intellibat/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="intellibat" class="anchor" href="#intellibat" aria-hidden="true"><span class="octicon octicon-link"></span></a>intellibat</h1>

<h3>
<a id="intellibat-is-a-project-based-on-arduino-and-esp8266-hardware-it-was-intended-to-be-used-on-ebikes-or-other-electric-appliances-and-allows-to-monitor-battery-stats-and-power-usage-on-a-webpage-through-wireless-standard" class="anchor" href="#intellibat-is-a-project-based-on-arduino-and-esp8266-hardware-it-was-intended-to-be-used-on-ebikes-or-other-electric-appliances-and-allows-to-monitor-battery-stats-and-power-usage-on-a-webpage-through-wireless-standard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intellibat is a project based on Arduino and ESP8266 hardware. It was intended to be used on ebikes or other electric appliances and allows to monitor battery stats and power usage on a webpage through wireless standard.</h3>

<p>This project has a <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-by-nc-sa</a> license; should be compatible with the arduino one.</p>

<h2>
<a id="things-you-need" class="anchor" href="#things-you-need" aria-hidden="true"><span class="octicon octicon-link"></span></a>Things you need:</h2>

<h3>
<a id="hardware-used-in-this-project" class="anchor" href="#hardware-used-in-this-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>hardware used in this project..</h3>

<ul>
<li>arduino (atmel 328 or more) - or simple atmel for the brave</li>
<li>ESP8266 soc (<a href="https://dl.dropboxusercontent.com/u/9515776/intellibat/AI-v0.9.5.0%20AT%20Firmware.bin">AT firmware 0.95</a> loaded)</li>
<li>ACS712 current sensor</li>
<li>DHT11 temperature and humidity sensor</li>
<li>some discrete components like resistors, caps and zener</li>
<li>some soldering skills, patience and probably a serial programmer (3,3V one)</li>
</ul>

<h2>
<a id="instructions-wip" class="anchor" href="#instructions-wip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Instructions: (wip)</h2>

<p>First of all the right firmware has to be installed inside ESSP8266. They usually come with very old AT firmware and any other version is not suitable, or works very bad and with partial support for arduino code. Use a serial programmer (3,3V one). When you're there you can even program the ESP work mode (set to 3, STA+AP) and AP credentials + STA credentials (maybe your tether wireless password, so that it will connect to it from the start). This need serial monitor like Realterm to work.
Otherwise this initial programmation is possible editing the sketch (Initial command cluster); remember that Wifi settings are stored permanently in rom, so you don't have to flash those parameters anytime you boot your system. It can even destroy your ESP after some (long) time, as NAND flash has limited writes life.</p>

<p>Second, program the sketch in Arduino; there are two versions, the "nano" one is for those atmel arduinos <strong>without</strong> a Hardware serial port. There are some libraries that you have to import inside your IDE to make it work, like AltSoftSerial, TextFinder and those related to DHT and ACS sensors. <em>I sugest you to do all on a breadboard, it's much simplier and it can be 99% tested before prototyping a bad not working product.</em></p>

<p>Third, I have used to achieve stepdown from my 60V battery an old usb switching 5V brick from a Sagem phone. Almost all this powersupplies can output 5V if connected to a DC relatively high voltage (some could not work under 50V volts, you have to find your ideal solution to power the board once it is inside your high voltage battery).</p>

<p>Some extra infos:
ESP8266 comes in many form factors and pinouts. Usually to power it up you only need CH_PD pulled up with 10k resistor ad a stable enough 3,3V stabilized voltage.. you take it from arduino 3,3V board regulator if you have a good ams1117 chip (original one) on your board. If that chip is counterfeit probably won't be good to power the ESP8266, that needs around 200mA to work; and don't forget good caps for good stabilization.
Don't mess up with ESP voltages, <strong>the soc is only 5V tollerant on the RX serial pin</strong>, it <strong>will fry</strong> on any other pin  for more than 3,6V given.
Pay attention to sketch pinouts; eg. Arduino AltSoftserial is hard coded and it's very difficult to understand where the fault is if mistakes are made.
The project AS IS, was made for 30A sensor and maximum 100V readings.. the zener should protect arduino input from spikes on the voltage reading pin.</p>

<p><strong>USE AT YOUR OWN RISK, I'M NOT LIABLE FOR ANY SITUATION THAT COULD DERIVE FROM THE USE OF THIS OPEN PROJECT.</strong>
<strong>ALSO PAY ATTENTION TO HIGH CURRENTS E VOLTAGES THAT COULD BE PRESENT ALONGSIDE THIS CREATION.</strong>
<strong>HAPPY HACKING.</strong></p>

<h4>
<a id="-donation--kindness-" class="anchor" href="#-donation--kindness-" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=HSHEHFDQB8U3S">( Donation == kindness )</a>
</h4>

<h2>
<a id="some-images" class="anchor" href="#some-images" aria-hidden="true"><span class="octicon octicon-link"></span></a>Some images:</h2>

<p><img src="https://dl.dropboxusercontent.com/u/9515776/intellibat/Intellibat_bb.jpg" alt="fritzing">
basic arduino, esp and sensors wiring</p>

<p><img src="https://dl.dropboxusercontent.com/u/9515776/intellibat/intellibat.jpg" alt="web view">
browser view</p>

<p><img src="https://dl.dropboxusercontent.com/u/9515776/intellibat/IMG_20150604_203448.jpg" alt="prototype">
messy prototype (with stepdown connected for battery voltage -&gt; 5V rail)</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/imayoda/intellibat">Intellibat</a> is maintained by <a href="https://github.com/imayoda">imayoda</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

